<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Howth Weather - Widgets</title>
    
    <style>
        /* BASE STYLES & THEME */
        :root {
            --color-dark-background: #1e1e1e; 
            --color-card-background: #2b2b2b;
            --color-sidebar-background: #1e1e1e;
            --color-text-light: #ffffff;
            --color-text-dim: #ccc;
            --color-accent-blue: #4a90e2; 
            --sidebar-width: 300px; /* MATCHES INDEX.HTML */
            --border-radius-large: 16px; 
            --border-radius-small: 8px;
        }

        body { margin: 0; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background-color: var(--color-dark-background); color: var(--color-text-light); overflow-x: hidden; }
        #weather-app { display: flex; min-height: 100vh; }

        /* SIDEBAR STYLING (STICKY) */
        #sidebar { 
            width: var(--sidebar-width); background-color: var(--color-sidebar-background); 
            padding: 20px 0; display: flex; flex-direction: column; 
            border-radius: 0 var(--border-radius-large) var(--border-radius-large) 0; 
            box-shadow: 2px 0 10px rgba(0, 0, 0, 0.5); z-index: 10;
            position: sticky; top: 0; height: 100vh; /* STICKY FIX */
        }
        /* Logo Size */
        .logo-container { width: 100px; height: 100px; margin: 0 auto 10px; border-radius: 50%; display: flex; justify-content: center; align-items: center; }
        #station-header img { display: block; width: 100%; max-width: 125px; height: auto; margin: 0 auto; } /* INCREASED SIZE */
        #station-header h1 { font-size: 1.4em; font-weight: 300; text-align: center; margin-bottom: 25px; color: var(--color-text-dim); }
        
        /* NAV LIST & STICKY FIX */
        nav ul { list-style: none; padding: 0; width: 100%; flex-grow: 1; overflow-y: auto; }
        .nav-item { padding: 10px 20px 10px 50px; cursor: pointer; transition: background-color 0.2s; margin: 5px 0; padding-right: 20px; }
        
        /* LINK COLOR FIX */
        .nav-item a, 
        .nav-item a:visited { color: var(--color-text-dim) !important; text-decoration: none !important; }
        
        .active-page { background-color: var(--color-accent-blue); border-radius: 0 25px 25px 0; margin-right: 10px; box-shadow: 0 2px 5px rgba(0, 0, 0, 0.3); }
        .active-page a { color: var(--color-text-light) !important; }
        #info-section { margin-top: auto; }
        #info-section, #dark-mode-toggle { padding: 10px 20px 10px 50px; cursor: pointer; font-size: 0.9em; opacity: 0.7; }

        /* MAIN WIDGETS LAYOUT */
        #dashboard-content { 
            flex-grow: 1; padding: 30px; max-width: 1000px; margin: 0 auto; 
        }
        
        /* Widget Container: Single, vertical column (FIXED) */
        #widget-grid {
            display: grid;
            grid-template-columns: 1fr; /* Single column on all devices */
            gap: 20px;
            width: 100%;
        }

        .widget-card {
            background-color: var(--color-card-background);
            border-radius: var(--border-radius-small);
            padding: 15px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            min-height: 400px; /* Consistent height for uniformity */
            display: flex;
            flex-direction: column;
        }

        .widget-card h3 { margin-top: 0; margin-bottom: 10px; font-size: 1.2em; font-weight: 400; }
        .widget-iframe-container { overflow: hidden; border-radius: var(--border-radius-small); flex-grow: 1; }
        .widget-iframe-container iframe { width: 100%; height: 100%; display: block; }


        /* RESPONSIVE SCALING (MOBILE) */
        @media (max-width: 600px) {
            /* FIX: HIDE WINDY.COM LINK ON MOBILE DEVICES */
            .nav-item:nth-child(4) { 
                display: none !important; 
            }
            
            #weather-app { flex-direction: column; } 
            #sidebar { width: 100%; border-radius: 0; padding: 10px 0; position: static; height: auto; }
            #station-header h1, #info-section { display: none; }
            #station-header { text-align: center; margin: 0 auto; }
            nav ul { display: flex; justify-content: space-around; padding: 0 10px; overflow-x: auto; white-space: nowrap; flex-grow: 0; overflow-y: hidden; }
            .nav-item { padding: 5px 10px; margin: 0; flex-shrink: 0; }
            .active-page { margin-right: 0; border-radius: var(--border-radius-small); }
            #dashboard-content { padding: 15px; max-width: none; margin: 0; }
            .widget-card { min-height: 300px; }
        }

        /* LIGHT MODE STYLES */
        body.light-mode {
            --color-dark-background: #f4f7f6; --color-card-background: #ffffff;
            --color-text-light: #333333; --color-sidebar-background: #eeeeee;
            --color-text-dim: #555555;
            background-color: var(--color-dark-background);
            color: var(--color-text-light);
        }
        body.light-mode #sidebar { background-color: var(--color-sidebar-background); box-shadow: 2px 0 10px rgba(0, 0, 0, 0.1); }
        body.light-mode .widget-card { background-color: var(--color-card-background); box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05); }
        body.light-mode #station-header h1 { color: var(--color-text-dim); }
        body.light-mode .nav-item a { color: var(--color-text-dim); }
        body.light-mode .active-page a { color: var(--color-text-light); }
        
        /* Toggle Switch Styles */
        #dark-mode-toggle { display: flex; justify-content: space-between; align-items: center; cursor: default; }
        #dark-mode-toggle label { cursor: pointer; }
        .switch-container { position: relative; display: inline-block; width: 50px; height: 28px; }
        .switch-container input { opacity: 0; width: 0; height: 0; }
        .slider { position: absolute; cursor: pointer; top: 0; left: 0; right: 0; bottom: 0; background-color: #555; transition: .4s; }
        .slider:before { position: absolute; content: ""; height: 20px; width: 20px; left: 4px; bottom: 4px; background-color: white; transition: .4s; }
        .slider.round { border-radius: 34px; }
        input:checked + .slider { background-color: var(--color-accent-blue); }
        input:checked + .slider:before { transform: translateX(22px); }
    </style>
</head>
<body>

    <div id="weather-app">
        <aside id="sidebar">
            <div id="station-header">
                <div class="logo-container">
                    <img src="howthw.png" alt="Howth Weather Station Logo">
                </div>
                <h1>Howth Weather Station</h1>
            </div>
            <nav>
                <ul>
                    <li class="nav-item"><a href="index.html">Home</a></li>
                    <li class="nav-item active-page"><a href="widgets.html">Widgets</a></li>
                    <li class="nav-item"><a href="alerts.html">Weather alerts</a></li>
                    <li class="nav-item"><a href="windy.html">Windy.com</a></li>
                </ul>
            </nav>
            <div id="info-section"><p>About</p></div>
            <div id="dark-mode-toggle">
                <label for="theme-switch">Light mode</label>
                <label class="switch-container">
                    <input type="checkbox" id="theme-switch">
                    <span class="slider round"></span>
                </label>
            </div>
        </aside>

        <main id="dashboard-content">
            <h2>Embedded Widgets</h2>
            <section id="widget-grid">
                <div class="widget-card" id="rain-viewer-widget">
                    <h3>Rain Viewer Radar - Dublin Area</h3>
                    <div class="widget-iframe-container">
                        <iframe src="https://www.rainviewer.com/map.html?loc=53.3665,-6.1175,11.23&oCS=1&c=3&o=83&lm=1&layer=radar&sm=1&sn=1" width="100%" frameborder="0" style="border:0;" allowfullscreen></iframe>
                    </div>
                </div>

                <div class="widget-card" id="met-eireann-widget">
                    <h3>Met Ã‰ireann National Warnings</h3>
                    <div class="widget-iframe-container">
                        <iframe style="border: 1px #ccc solid;" src="https://www.met.ie/widgets/national" name="MEWarning" width="100%" frameborder="1" marginwidth="0px" marginheight="0px" scrolling="no" allowfullscreen="allowfullscreen" title="Weather warnings widget"></iframe>
                    </div>
                </div>

                <div class="widget-card" id="windy-small-widget">
                    <h3>Windy.com Alert Map</h3>
                    <div class="widget-iframe-container">
                        <iframe width="100%" src="https://embed.windy.com/embed.html?type=map&location=coordinates&metricRain=mm&metricTemp=%C2%B0C&metricWind=km/h&zoom=6&overlay=capAlerts&product=capAlerts&level=surface&lat=53.326&lon=-8.306" frameborder="0"></iframe>
                    </div>
                </div>
                
            </section>
        </main>
    </div>

    <script>
        const themeSwitch = document.getElementById('theme-switch');
        const body = document.body;
        function applyTheme(theme) {
            if (theme === 'light') {
                body.classList.add('light-mode');
                themeSwitch.checked = true;
            } else {
                body.classList.remove('light-mode');
                themeSwitch.checked = false;
            }
        }
        const savedTheme = localStorage.getItem('theme');
        if (savedTheme) {
            applyTheme(savedTheme);
        } else {
            applyTheme('dark');
        }
        themeSwitch.addEventListener('change', function() {
            if (this.checked) {
                body.classList.add('light-mode');
                localStorage.setItem('theme', 'light');
            } else {
                body.classList.remove('light-mode');
                localStorage.setItem('theme', 'dark');
            }
        });
    </script>
</body>
</html>